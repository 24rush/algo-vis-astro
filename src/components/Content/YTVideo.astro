---
import MainButton from "../MainButton.astro";
import SummaryBox from "./SummaryBox.astro";
const { video_id, title, caption } = Astro.props;

const iframeClass = "ytVideo-iframe";
const urlopenerClass = "ytVideo-urlopener";
---

<SummaryBox show title={caption}>
    <iframe
        id={"ytVideo-iframe-" + video_id}
        class={iframeClass}
        credentialless
        style="aspect-ratio: 16/9; width:100%"
        src={"https://www.youtube.com/embed/" +
            video_id +
            "?origin=https://primiipasi.info"}
        title="YouTube video player"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen></iframe>

    <a href={"https://www.youtube.com/watch?v=" + video_id} target="_blank" rel="noopener" class={urlopenerClass}>
        <MainButton text>
            <svg
                height="22px"
                width="22px"
                version="1.1"
                id="Layer_1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                viewBox="0 0 461.001 461.001"
                xml:space="preserve"
                fill="#000000"
                ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
                    id="SVGRepo_tracerCarrier"
                    stroke-linecap="round"
                    stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
                    <g>
                        <path
                            style="fill:#F61C0D;"
                            d="M365.257,67.393H95.744C42.866,67.393,0,110.259,0,163.137v134.728 c0,52.878,42.866,95.744,95.744,95.744h269.513c52.878,0,95.744-42.866,95.744-95.744V163.137 C461.001,110.259,418.135,67.393,365.257,67.393z M300.506,237.056l-126.06,60.123c-3.359,1.602-7.239-0.847-7.239-4.568V168.607 c0-3.774,3.982-6.22,7.348-4.514l126.06,63.881C304.363,229.873,304.298,235.248,300.506,237.056z"
                        ></path>
                    </g>
                </g></svg
            >
            <span class="button-activity">{title}</span>
        </MainButton>
    </a>
</SummaryBox>

<script is:inline>
    if (window.credentialless == undefined) {
        let iframes = document.getElementsByClassName("ytVideo-iframe");
        for (let iframe of iframes) iframe.remove();
    } else {
        let urlopeners = document.getElementsByClassName("ytVideo-urlopener");
        for (let urlopener of urlopeners) urlopener.remove();
    }
</script>
